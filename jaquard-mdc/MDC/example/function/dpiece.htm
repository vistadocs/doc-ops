
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<html>
<title>M[UMPS] Functions - $DPIECE</title>
<body background="../mbe.gif">
<h1>M[UMPS] Functions - $DP[IECE]</h1>

<p>Approved for inclusion in a future ANSI M[UMPS] language standard.</p>

<p>This function works on substrings of strings that are
specified as parameters. This function is intended to be used in
conjunction with data structures that store multiple values in a
single string. The main difference with the function <b>$PIECE</b> is
that this function is capable of working on multiple substrings
at the same time.</p>

<p><tt><b>SET</b> DLM="^"<br>
<b>SET</b> X=<b>$DPIECE</b>("",DLM,A+3,B,,D,,,)</tt><br>
Stores values into a data record.<br>
The record format specification relies on the function <b>$PIECE</b> to
define the record fields. The piece delimiter is the value of
<tt>DLM</tt>. The first parameter specifies the string in which
the substitution will occur (an empty string in this example). The
value of <tt>A+3</tt> is used to replaced the first piece, the
value of <tt>B</tt> replaces the second piece, the third piece is
untouched (since the initial value was an empty string, this
piece will remain empty), the value of <tt>D</tt> replaces the
fourth piece.</p>

<p>The omitted parameters for the fifth through seventh pieces
cause the record value to be modified in the sense that
piece-separators for these pieces are inserted, but the pieces
themselves will remain untouched (empty in this case).</p>

<p><tt><b>SET</b> DLM="^"<br>
<b>SET</b> X=<b>$DPIECE</b>(X,DLM,A:5,,,$$ABC)</tt><br>
Stores values into a data record.<br> The value of local variable
<tt>X</tt> is the initial value of the data record into which
substitution will occur. The parameter <tt>A:5</tt> indicates
that the value of <tt>A</tt> is to replace the fifth piece
(separated by the value of <tt>DLM</tt>).</p>

<p>Each parameter that follows the third parameter of the
function $DPIECE is applied to the "next" piece, unless an
explicit specification of a piece-counter redefines the current
piece-number. Thus pieces 6 and 7 are left untouched (due to the
omitted parameters), and piece number 8 is replaced by the value
of <tt>$$ABC</tt>.</p>

<p><tt><b>SET</b> DLM="$"<br>
<b>SET $DPIECE</b>(DLM,A,B:4,,D)=X</tt><br>
Extracts values out of a data record.<br>
The value of local variable <tt>X</tt> is the data record that is being
accessed, and the values of some data fields will be extracted
and stored into other local variables. The value of the first
piece (separated by the value of <tt>DLM</tt>) will be stored in local
variable <tt>A</tt>; the value of the fourth piece will be stored in local
variable <tt>B</tt>, and the value of the sixth piece (note the omitted
parameter) will be stored in local variable <tt>D</tt>.</p>

<hr>

<p>This document is &copy; Ed de Moel, 1995-2005.<br>
It is part of a book by Ed de Moel that is published under
the title "M[UMPS] by Example" (ISBN 0-918118-42-5).<br>
Printed copies of the book are no longer available.</p>

<hr>
</body></html>
